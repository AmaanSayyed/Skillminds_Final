"use strict";(self.webpackChunkskillminds_web=self.webpackChunkskillminds_web||[]).push([[546],{1546:(t,e,a)=>{a.r(e),a.d(e,{default:()=>l});var w=a(5043),s=a(6213),c=a(579);const n=t=>{let{contact:e,onCancel:a,onConfirm:w}=t;return(0,c.jsx)("div",{className:"tw-fixed tw-inset-0 tw-flex tw-items-center tw-justify-center tw-bg-black tw-bg-opacity-50",children:(0,c.jsxs)("div",{className:"tw-bg-white tw-rounded-lg tw-overflow-hidden tw-shadow-xl tw-transform tw-transition-all tw-sm:max-w-lg tw-w-full",children:[(0,c.jsxs)("div",{className:"tw-px-4 tw-py-5 tw-sm:p-6",children:[(0,c.jsx)("h3",{className:"tw-text-lg tw-leading-6 tw-font-medium tw-text-gray-900",children:"Delete Contact"}),(0,c.jsx)("div",{className:"tw-mt-2",children:(0,c.jsxs)("p",{className:"tw-text-sm tw-text-gray-500",children:["Are you sure you want to delete the contact ",(0,c.jsx)("strong",{children:e.firstName}),"?"]})})]}),(0,c.jsxs)("div",{className:"tw-bg-gray-50 tw-px-4 tw-py-3 tw-sm:px-6 tw-flex tw-justify-end",children:[(0,c.jsx)("button",{className:" tw-border tw-border-gray-300 tw-rounded tw-shadow-sm tw-px-4 tw-py-2 tw-bg-red-600 tw-text-white tw-mr-2",onClick:w,children:"Delete"}),(0,c.jsx)("button",{className:"tw-border tw-border-gray-300 tw-rounded tw-shadow-sm tw-px-4 tw-py-2 tw-bg-gray-500 tw-text-white",onClick:a,children:"Cancel"})]})]})})};var r=a(3216),i=a(3587);const l=()=>{const[t,e]=(0,w.useState)([]),{admin:a}=(0,i.Z)(),[l,d]=(0,w.useState)(!0),[x,o]=(0,w.useState)(null),[p,m]=(0,w.useState)(!1),[h,u]=(0,w.useState)(null),[y,g]=(0,w.useState)(""),f=(0,r.Zp)();(0,w.useEffect)((()=>{(async()=>{try{const t=await s.A.get("/api/contacts",{headers:{Authorization:"Bearer ".concat(a.token)}});e(t.data)}catch(t){o("Failed to fetch contacts")}finally{d(!1)}})(),(async()=>{const t=await fetch("/api/csrf-token"),e=await t.json();g(e.csrfToken)})()}),[a]);return l?(0,c.jsx)("p",{className:"tw-text-center tw-text-gray-500",children:"Loading..."}):x?(0,c.jsx)("p",{className:"tw-text-center tw-text-red-500",children:x}):t.length?(0,c.jsxs)("div",{className:"tw-container tw-mx-auto tw-p-4 tw-my-16",children:[(0,c.jsx)("h2",{className:"tw-text-4xl tw-font-semibold tw-text-center tw-mb-16 tw-text-blue-500",children:"Contact List"}),(0,c.jsxs)("table",{className:"tw-min-w-full tw-divide-y tw-divide-gray-200",children:[(0,c.jsx)("thead",{className:"tw-bg-gray-100",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"First Name"}),(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"Last Name"}),(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"Phone"}),(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"Email"}),(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"Organization Name"}),(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"Date"}),(0,c.jsx)("th",{className:"tw-px-6 tw-py-3 tw-text-left tw-text-xs tw-font-medium tw-text-gray-500 tw-uppercase tw-tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"tw-bg-white tw-divide-y tw-divide-gray-200",children:t.map((t=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:t.firstName}),(0,c.jsx)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:t.lastName}),(0,c.jsx)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:t.phone}),(0,c.jsx)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:t.email}),(0,c.jsx)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:t.organizationName}),(0,c.jsx)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:t.createdAt}),(0,c.jsxs)("td",{className:"tw-px-6 tw-py-4 tw-whitespace-nowrap",children:[(0,c.jsx)("button",{className:"tw-bg-blue-500 tw-text-white tw-px-3 tw-py-1 tw-rounded tw-mr-2",onClick:()=>{return e=t._id,f("/admin/contacts/".concat(e)),void console.log("View contact with id:",e);var e},children:(0,c.jsx)("i",{className:"fal fa-eye"})}),(0,c.jsx)("button",{className:"tw-bg-red-500 tw-text-white tw-px-3 tw-py-1 tw-rounded",onClick:()=>(t=>{u(t),m(!0)})(t),children:(0,c.jsx)("i",{className:"fal fa-trash-can"})})]})]},t._id)))})]}),p&&(0,c.jsx)(n,{contact:h,onCancel:()=>{m(!1),u(null)},onConfirm:()=>(async w=>{try{await s.A.delete("/api/contacts/".concat(w),{headers:{"X-CSRF-TOKEN":y,Authorization:"Bearer ".concat(a.token)}}),e(t.filter((t=>t._id!==w))),m(!1)}catch(x){console.error("Failed to delete contact",x)}})(h._id)})]}):(0,c.jsx)("p",{className:"tw-text-center tw-text-gray-500",children:"No contacts found"})}}}]);
//# sourceMappingURL=546.e66a9c45.chunk.js.map