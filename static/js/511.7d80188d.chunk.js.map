{"version":3,"file":"static/js/511.7d80188d.chunk.js","mappings":"kLAIA,MAkCA,EAlCcA,KACV,MAAOC,EAASC,IAAeC,EAAAA,EAAAA,UAAS,KACjCC,EAASC,IAAeF,EAAAA,EAAAA,UAAS,KAClC,MAACG,EAAK,MAACC,EAAK,UAACC,GCJDC,MAClB,MAAOF,EAAMG,IAAYP,EAAAA,EAAAA,UAAS,OAC3BK,EAAUG,IAAgBR,EAAAA,EAAAA,UAAS,OACpC,SAACS,IAAYC,EAAAA,EAAAA,KA2BnB,MAAO,CAACP,MAzBMQ,MAAMb,EAASG,KACzBO,GAAa,GACbD,EAAS,MAET,MAAMK,QAAiBC,MAAM,mBAAmB,CAC5CC,OAAO,OACPC,QAAQ,CACJ,eAAe,oBAEnBC,KAAKC,KAAKC,UAAU,CAACpB,WAASG,eAE5BkB,QAAaP,EAASO,OACxBP,EAASQ,KACTZ,GAAa,GACbD,EAASY,EAAKf,QAEfQ,EAASQ,KAERC,aAAaC,QAAQ,QAAQL,KAAKC,UAAUC,IAG5CV,EAAS,CAACc,KAAK,QAAQC,QAAQL,IAC/BX,GAAa,GACjB,EAEUH,YAAUD,QAAM,ED1BEE,GAOhC,OACImB,EAAAA,EAAAA,MAAA,QAAMC,UAAU,QAAQC,SANRhB,UAChBiB,EAAEC,uBACI1B,EAAML,EAASG,EAAS,EAIiB6B,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,aACJC,EAAAA,EAAAA,KAAA,SAAAD,SAAQ,eACRC,EAAAA,EAAAA,KAAA,SACAR,KAAK,OACLS,KAAK,WACLC,SAAWL,GAAI7B,EAAY6B,EAAEM,OAAOC,OACpCA,MAAOrC,KAEPiC,EAAAA,EAAAA,KAAA,SAAAD,SAAQ,eACRC,EAAAA,EAAAA,KAAA,SACAR,KAAK,WACLS,KAAK,WACLC,SAAWL,GAAI1B,EAAY0B,EAAEM,OAAOC,OACpCA,MAAOlC,IAENG,IAAS2B,EAAAA,EAAAA,KAAA,OAAKL,UAAU,QAAOI,SAAE1B,KAClC2B,EAAAA,EAAAA,KAAA,UAAQL,UAAU,YAAWU,SAAU/B,EAAUyB,SAAC,aAE/C,C","sources":["components/Admin/Login.js","hooks/useLogin.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useLogin } from \"../../hooks/useLogin\";\r\nimport '../../utils/login.css'\r\n\r\nconst Login = () => {\r\n    const [username,setUsername] = useState('')\r\n    const [password,setPassword] = useState('')\r\n    const {login,error,isLoading} = useLogin()\r\n\r\n    const handleSubmit =async(e)=>{\r\n        e.preventDefault()\r\n        await login(username,password)\r\n    }\r\n\r\n    return (\r\n        <form className=\"login\" onSubmit={handleSubmit}>\r\n            <h3>Log in </h3>\r\n            <label >Username:</label>\r\n            <input \r\n            type=\"text\" \r\n            name=\"username\"\r\n            onChange={(e)=>setUsername(e.target.value)}\r\n            value={username}\r\n            />\r\n            <label >Password:</label>\r\n            <input \r\n            type=\"password\" \r\n            name=\"password\"\r\n            onChange={(e)=>setPassword(e.target.value)}\r\n            value={password}\r\n            />\r\n            {error && <div className=\"error\">{error}</div>}\r\n            <button className=\"tw-w-full\"disabled={isLoading}>Log in</button>\r\n            \r\n        </form>\r\n    );\r\n}\r\n \r\nexport default Login;","import { useState } from \"react\";\r\nimport { useAuthContext } from \"./useAuthContext\";\r\n\r\nexport const useLogin=()=>{\r\n    const [error,setError] = useState(null)\r\n    const [isLoading,setIsLoading] = useState(null)\r\n    const {dispatch} = useAuthContext()\r\n\r\n    const login = async(username,password)=>{\r\n        setIsLoading(true)\r\n        setError(null)\r\n\r\n        const response = await fetch('/api/admin/login',{\r\n            method:'POST',\r\n            headers:{\r\n                'Content-Type':'application/json'\r\n            },\r\n            body:JSON.stringify({username,password})\r\n        })\r\n        const json = await response.json()\r\n        if(!response.ok){\r\n            setIsLoading(false)\r\n            setError(json.error)\r\n        }\r\n        if(response.ok){\r\n            //save the admin to localstorage\r\n            localStorage.setItem('admin',JSON.stringify(json))\r\n\r\n            //update auth context\r\n            dispatch({type:'LOGIN',payload:json})\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n    return {login,isLoading,error}\r\n}"],"names":["Login","username","setUsername","useState","password","setPassword","login","error","isLoading","useLogin","setError","setIsLoading","dispatch","useAuthContext","async","response","fetch","method","headers","body","JSON","stringify","json","ok","localStorage","setItem","type","payload","_jsxs","className","onSubmit","e","preventDefault","children","_jsx","name","onChange","target","value","disabled"],"sourceRoot":""}